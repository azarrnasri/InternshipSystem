{% load static %}

<!DOCTYPE html>

<html>
	<head>
		<title>Dashboard</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <!-- CSS -->
        <link rel="stylesheet" href="{% static 'placement/assets/css/main.css' %}">
        <link rel="stylesheet" href="{% static 'placement/assets/css/dashboard.css' %}">
        <link rel="stylesheet" href="{% static 'placement/assets/css/sidebar.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	</head>
	<body class="is-preload">
		<!-- Header -->
			<div id="header">

				<div class="top">

					<!-- Logo -->
						<div id="logo">
							<span class="image avatar48"><img src="images/avatar.jpg" alt="" /></span>
							<h1 id="title">{{ request.user.username }}</h1>
							<p>{{ request.user.role }}</p>
                            <a href="{% url 'logout' %}">Logout</a>
						</div>

					<!-- Nav -->
						<button id="sidebar-toggle" class="sidebar-toggle">
							<i class="fas fa-bars"></i>
						</button>
						<nav class="sidebar">
							<ul>
								<li><a href="{% url 'academic_dashboard' %}" class="nav-item" data-page="dashboard"><i class="fas fa-chart-line"></i><span>Dashboard</span></a></li>
								<li><a href="{% url 'academic_logbook_review' %}" class="nav-item" data-page="logbooks"><i class="fas fa-book"></i><span>Logbooks</span></a></li>
								<li><a href="{% url 'academic_student_list' %}" class="nav-item" data-page="students"><i class="fas fa-users"></i><span>Student List</span></a></li>
								<li><a href="{% url 'notifications' %}" class="nav-item" data-page="notifications"><i class="fas fa-bell"></i><span>Notifications</span></a></li>
							</ul>
						</nav>


				</div>

				<div class="bottom">

					<!-- Social Icons -->
						<ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
							<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>

				</div>

			</div>

		<!-- Main -->
		<div id="main">
			{% block content %}
			<!-- Academic Supervisor Summary -->
			<section id="summary" class="two">
				<div class="container">
					<header>
						<h2>Dashboard Overview</h2>
					</header>

					<div class="row">
						<!-- Assigned Students -->
						<div class="col-12">
							<article class="dashboard-card">
								<header>
									<h3>Assigned Students</h3>
									<span class="card-count">{{ students|length }}</span>
								</header>

								{% if students %}
								<div class="student-list-grid">
									{% for s in students %}
									<div class="student-profile-card">
										<div class="profile-grid">
											<div class="profile-item">
												<div class="profile-label">Full Name</div>
												<div class="profile-value">{{ s.user.get_full_name|default:s.user.username }}</div>
											</div>
											<div class="profile-item">
												<div class="profile-label">Programme</div>
												<div class="profile-value">{{ s.programme }}</div>
											</div>
										</div>
										<div class="form-actions" style="margin-top: 16px; justify-content: flex-end;">
											<a href="{% url 'academic_student_detail' s.id %}" class="btn btn-primary">View Profile</a>
										</div>
									</div>
									{% endfor %}
								</div>
								{% else %}
								<div class="no-student" style="margin-top: 20px;">
									<div class="no-student-icon">ðŸ‘¤</div>
									<p>No students assigned</p>
								</div>
								{% endif %}
							</article>
						</div>





						<!-- Pending Logbooks -->
						<div class="col-12">
							<article class="dashboard-card">
								<header>
									<h3>Pending Logbooks</h3>
									<span class="card-count">{{ pending_logbooks.count }}</span>
								</header>
								<p>Logbooks awaiting review</p>
								<div class="pending-logbooks-list">
									{% for log in pending_logbooks %}
									<div class="pending-logbook-card">
										<div class="pending-logbook-info">
											<span class="logbook-student">
												{{ log.student.user.get_full_name|default:log.student.user.username }}
											</span>
											<span class="logbook-date">Submitted: {{ log.submitted_date|date:"M d, Y" }}</span>
										</div>
									</div>
									{% empty %}
									<p>No pending logbooks.</p>
									{% endfor %}
								</div>
							</article>
						</div>



						<!-- Pending Evaluations -->
						<div class="col-12">
							<article class="dashboard-card">
								<header>
									<h3>Pending Evaluations</h3>
									<span class="card-count">{{ pending_evals.count }}</span>
								</header>
								<p>Evaluations awaiting submission</p>
								<ul>
									{% for eval in pending_evals %}
									<li>
										{{ eval.student.user.get_full_name }} - <a href="{% url 'submit_academic_evaluation' eval.id %}">Evaluate</a>
									</li>
									{% empty %}
									<li>No pending evaluations.</li>
									{% endfor %}
								</ul>
							</article>
						</div>
					</div>
					
				</div>
			</section>

		
			<!-- Footer -->
			<div id="footer">

				<!-- Copyright -->
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>

			</div>

			<!-- Scripts -->
            <script src="{% static 'placement/assets/js/jquery.min.js' %}"></script>
            <script src="{% static 'placement/assets/js/jquery.scrolly.min.js' %}"></script>
            <script src="{% static 'placement/assets/js/jquery.scrollex.min.js' %}"></script>
            <script src="{% static 'placement/assets/js/browser.min.js' %}"></script>
            <script src="{% static 'placement/assets/js/breakpoints.min.js' %}"></script>
            <script src="{% static 'placement/assets/js/util.js' %}"></script>
            <script src="{% static 'placement/assets/js/main.js' %}"></script>
            <script src="{% static 'placement/assets/js/sidebar.js' %}"></script>

		{% endblock %}
		</div>

	</body>
</html>