{% extends 'student/base.html' %}

{% block content %}
{% if error %}
  <div class="alert">
    {{ error }}
  </div>
{% else %}

<h2>My Profile</h2>

<h3>Academic Information</h3>
<table>
  <tr><th>User ID</th><td>{{ student.user.id }}</td></tr>
  <tr><th>Name</th><td>{{ student.user.username }}</td></tr>
  <tr><th>Program</th><td>{{ student.program }}</td></tr>
  <tr><th>Semester</th><td>{{ student.semester }}</td></tr>
  <tr>
    <th>Academic Supervisor</th>
    <td>
      {% if student.academic_supervisor %}
        {{ student.academic_supervisor.user.username }}
      {% else %}
        Not Assigned
      {% endif %}
    </td>
  </tr>
</table>

<h3>Update Email</h3>
<form method="post">
  {% csrf_token %}
  {{ email_form.as_p }}
  <button type="submit">Update Email</button>
</form>

<h3>Upload Document (Resume)</h3>
<form method="post" enctype="multipart/form-data">
  {% csrf_token %}
  {{ doc_form.as_p }}
  <button type="submit">Upload</button>
</form>

<h3>Uploaded Documents</h3>
<ul>
  {% for doc in documents %}
    <li>
      {{ doc.doc_type }} â€“
      <a href="{{ doc.file.url }}" target="_blank">View</a>
    </li>
  {% empty %}
    <li>No documents uploaded</li>
  {% endfor %}
</ul>

{% endif %}
{% endblock %}
