{% extends "admin/admin_base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>

    <style>
        @import url("fontawesome-all.min.css");
        @import url("https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400,600");

        :root {
            --primary: #6f8fd8;
            --danger: #dc2626;
            --bg: #f5f5f5;
            --card: #ffffff;
            --text: #1f2937;
            --muted: #6b7280;
            --border: #e5e7eb;
        }

        * {
            box-sizing: border-box;
            font-family: 'Source Sans Pro', sans-serif;
        }

        body {
            margin: 0;
            background: var(--bg);
            color: var(--text);
        }

        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        h1 {
            font-size: 40px;
            margin-bottom: 24px;
            font-weight: 300;
            color: #666;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--card);
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px;
            text-align: center;
        }

        .card h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .card .value {
            font-size: 36px;
            font-weight: 600;
            color: var(--primary);
        }

        .card .description {
            font-size: 14px;
            color: var(--muted);
            margin-top: 5px;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

<div class="container">

    <h1>Admin Dashboard</h1>

    <div class="dashboard-grid">
        <!-- Users -->
        <div class="card">
            <h3><i class="fas fa-users"></i> Total Users</h3>
            <div class="value">{{ total_users }}</div>
            <div class="description">Registered users in the system</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-user-friends"></i> Students</h3>
            <div class="value">{{ students_count }}</div>
            <div class="description">Student users</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-building"></i> Company Supervisors</h3>
            <div class="value">{{ companies_count }}</div>
            <div class="description">Company supervisor users</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-graduation-cap"></i> Academic Supervisors</h3>
            <div class="value">{{ academics_count }}</div>
            <div class="description">Academic supervisor users</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-cog"></i> Admins</h3>
            <div class="value">{{ admins_count }}</div>
            <div class="description">Administrator users</div>
        </div>

        <!-- Internships -->
        <div class="card">
            <h3><i class="fas fa-briefcase"></i> Total Internships</h3>
            <div class="value">{{ total_internships }}</div>
            <div class="description">All internships posted</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-folder-open"></i> Open Internships</h3>
            <div class="value">{{ open_internships }}</div>
            <div class="description">Currently open for applications</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-folder"></i> Closed Internships</h3>
            <div class="value">{{ closed_internships }}</div>
            <div class="description">Closed internships</div>
        </div>

        <!-- Applications -->
        <div class="card">
            <h3><i class="fas fa-file-alt"></i> Total Applications</h3>
            <div class="value">{{ total_applications }}</div>
            <div class="description">All internship applications</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-clock"></i> Pending Applications</h3>
            <div class="value">{{ pending_applications }}</div>
            <div class="description">Awaiting review</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-check"></i> Accepted Applications</h3>
            <div class="value">{{ accepted_applications }}</div>
            <div class="description">Accepted by supervisors</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-times"></i> Rejected Applications</h3>
            <div class="value">{{ rejected_applications }}</div>
            <div class="description">Rejected applications</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-handshake"></i> Offered Applications</h3>
            <div class="value">{{ offered_applications }}</div>
            <div class="description">Offers made to students</div>
        </div>

        <!-- Placements -->
        <div class="card">
            <h3><i class="fas fa-play"></i> Active Placements</h3>
            <div class="value">{{ active_placements }}</div>
            <div class="description">Ongoing internships</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-stop"></i> Completed Placements</h3>
            <div class="value">{{ completed_placements }}</div>
            <div class="description">Finished internships</div>
        </div>

        <!-- Logbooks -->
        <div class="card">
            <h3><i class="fas fa-book"></i> Total Logbooks</h3>
            <div class="value">{{ total_logbooks }}</div>
            <div class="description">All submitted logbooks</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-clock"></i> Pending Logbooks</h3>
            <div class="value">{{ pending_logbooks }}</div>
            <div class="description">Awaiting approval</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-check"></i> Approved Logbooks</h3>
            <div class="value">{{ approved_logbooks }}</div>
            <div class="description">Approved by supervisors</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-times"></i> Rejected Logbooks</h3>
            <div class="value">{{ rejected_logbooks }}</div>
            <div class="description">Rejected logbooks</div>
        </div>

        <!-- Companies and Departments -->
        <div class="card">
            <h3><i class="fas fa-building"></i> Total Companies</h3>
            <div class="value">{{ total_companies }}</div>
            <div class="description">Registered companies</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-sitemap"></i> Total Departments</h3>
            <div class="value">{{ total_departments }}</div>
            <div class="description">Company departments</div>
        </div>

        <!-- Attendance -->
        <div class="card">
            <h3><i class="fas fa-calendar-alt"></i> Total Attendance Records</h3>
            <div class="value">{{ total_attendance }}</div>
            <div class="description">All attendance entries</div>
        </div>

        <div class="card">
            <h3><i class="fas fa-calendar-check"></i> Today's Attendance</h3>
            <div class="value">{{ today_attendance }}</div>
            <div class="description">Attendance marked today</div>
        </div>

        <!-- Evaluations -->
        <div class="card">
            <h3><i class="fas fa-star"></i> Pending Evaluations</h3>
            <div class="value">{{ pending_evaluations }}</div>
            <div class="description">Evaluations awaiting submission</div>
        </div>
    </div>

    <!-- Recent Notifications -->
    <div class="notifications-section" style="margin-top: 40px;">
        <h2 style="font-size: 32px; margin-bottom: 20px; color: #666;">
            Recent Notifications
            {% if unread_notifications_count > 0 %}
                <span style="background: #dc2626; color: white; padding: 4px 8px; border-radius: 12px; font-size: 14px; margin-left: 10px;">{{ unread_notifications_count }} new</span>
            {% endif %}
        </h2>
        <div class="card" style="max-width: none;">
            {% if recent_notifications %}
                <ul style="list-style: none; padding: 0; margin: 0;">
                    {% for notification in recent_notifications %}
                        <li style="padding: 15px 0; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <p style="margin: 0; font-size: 16px; color: #1f2937;">{{ notification.message }}</p>
                                <small style="color: #6b7280;">{{ notification.created_at|date:"M d, Y H:i" }}</small>
                            </div>
                            {% if not notification.is_read %}
                                <span style="background: #6f8fd8; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">New</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p style="text-align: center; color: #6b7280; padding: 20px;">No notifications yet.</p>
            {% endif %}
        </div>
    </div>

</div>

{% endblock %}

</body>
</html>